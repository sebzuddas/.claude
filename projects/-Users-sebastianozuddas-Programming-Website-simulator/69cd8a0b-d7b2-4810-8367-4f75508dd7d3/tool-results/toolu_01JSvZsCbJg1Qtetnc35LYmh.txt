The file /Users/sebastianozuddas/Programming/Website/simulator/src/components/visualizations/SystemModel.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   373→              y: perpY * offsetAmount
   374→            }
   375→          }
   376→
   377→          function drawParticles(p: any, pool: Particle[]) {
   378→            pool.forEach(particle => {
   379→              if (!particle.active) return
   380→
   381→              const { edge, progress } = particle
   382→
   383→              // Calculate base position along the edge
   384→              let x1 = edge.from.x
   385→              let y1 = edge.from.y
   386→              let x2 = edge.to.x
   387→              let y2 = edge.to.y
   388→
   389→              // For bidirectional edges, offset to the parallel pipe using canonical direction
   390→              if (edge.bidirectional) {
   391→                // Use same canonical direction as in drawArrow
   392→                const useReverse = edge.from.id > edge.to.id
   393→                const refX1 = useReverse ? x2 : x1
   394→                const refY1 = useReverse ? y2 : y1
   395→                const refX2 = useReverse ? x1 : x2
   396→                const refY2 = useReverse ? y1 : y2
   397→
   398→                const offset = getParallelOffset(refX1, refY1, refX2, refY2, Math.abs(edge.parallelOffset))
   399→                const sign = edge.parallelOffset > 0 ? 1 : -1
   400→
   401→                x1 += offset.x * sign
   402→                y1 += offset.y * sign
   403→                x2 += offset.x * sign
   404→                y2 += offset.y * sign
   405→              }
   406→
   407→              // Interpolate along the (possibly offset) line
   408→              const x = p.lerp(x1, x2, progress)
   409→              const y = p.lerp(y1, y2, progress)
   410→
   411→              const isPositive = edge.weight >= 0
   412→              p.fill(isPositive ? [50, 200, 50, 220] : [200, 50, 50, 220])
   413→              p.noStroke()
   414→              p.circle(x, y, PARTICLE_SIZE)
   415→            })
   416→          }
   417→
   418→          function drawNodes(p: any, nodes: Node[]) {
   419→            nodes.forEach(node => {
   420→              // Node color based on type