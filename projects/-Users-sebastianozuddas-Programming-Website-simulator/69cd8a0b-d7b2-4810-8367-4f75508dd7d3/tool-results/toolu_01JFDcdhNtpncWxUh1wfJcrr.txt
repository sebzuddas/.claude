The file /Users/sebastianozuddas/Programming/Website/simulator/src/components/visualizations/SystemModel.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   311→              p.text(`w=${weight.toFixed(2)}`, midX, midY + 15)
   312→            })
   313→          }
   314→
   315→          function drawArrow(p: any, from: Node, to: Node, isPositive: boolean, isBidirectional: boolean, offsetAmount: number) {
   316→            let x1 = from.x
   317→            let y1 = from.y
   318→            let x2 = to.x
   319→            let y2 = to.y
   320→
   321→            // For bidirectional edges, draw parallel pipe offset from center
   322→            if (isBidirectional) {
   323→              // Use a consistent reference direction for perpendicular calculation
   324→              // Always calculate based on the canonical direction (lexicographically smaller ID first)
   325→              const useReverse = from.id > to.id
   326→              const refX1 = useReverse ? x2 : x1
   327→              const refY1 = useReverse ? y2 : y1
   328→              const refX2 = useReverse ? x1 : x2
   329→              const refY2 = useReverse ? y1 : y2
   330→
   331→              // Get perpendicular offset using canonical direction
   332→              const offset = getParallelOffset(refX1, refY1, refX2, refY2, Math.abs(offsetAmount))
   333→
   334→              // Apply offset with correct sign
   335→              const sign = offsetAmount > 0 ? 1 : -1
   336→              x1 += offset.x * sign
   337→              y1 += offset.y * sign
   338→              x2 += offset.x * sign
   339→              y2 += offset.y * sign
   340→            }
   341→
   342→            // Draw pipe (line)
   343→            p.line(x1, y1, x2, y2)
   344→