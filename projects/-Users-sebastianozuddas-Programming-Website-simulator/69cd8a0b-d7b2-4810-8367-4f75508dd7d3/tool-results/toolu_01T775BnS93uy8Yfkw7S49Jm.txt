The file /Users/sebastianozuddas/Programming/Website/simulator/src/components/visualizations/SystemModel.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   754→      .then(() => alert('Current state copied to clipboard!'))
   755→      .catch(err => console.error('Failed to copy:', err))
   756→  }
   757→
   758→  const openInStateSpaceVisualizer = () => {
   759→    if (!simulationRef.current || !data) {
   760→      console.error('No simulation data available')
   761→      return
   762→    }
   763→
   764→    try {
   765→      // Prepare data in StateSpaceData format
   766→      const stateSpaceData = {
   767→        t: simulationRef.current.t,
   768→        x: simulationRef.current.x,
   769→        labels: data.labels?.states,
   770→        title: data.title || 'System Simulation'
   771→      }
   772→
   773→      // Validate data before storing
   774→      if (!stateSpaceData.t || !stateSpaceData.x || stateSpaceData.t.length === 0 || stateSpaceData.x.length === 0) {
   775→        console.error('Invalid simulation data')
   776→        return
   777→      }
   778→
   779→      // Store in sessionStorage
   780→      sessionStorage.setItem('stateSpaceData', JSON.stringify(stateSpaceData))
   781→
   782→      // Navigate to state space visualizer
   783→      router.push('/statespace')
   784→    } catch (error) {
   785→      console.error('Failed to open state space visualizer:', error)
   786→    }
   787→  }
   788→
   789→  const openInVectorField = () => {
   790→    if (!data || !data.A) {
   791→      console.error('No system matrix available')
   792→      return
   793→    }
   794→
   795→    try {
   796→      // Prepare data in VectorFieldData format
   797→      const vectorFieldData = {
   798→        A: data.A,
   799→        labels: data.labels?.states,
   800→        title: data.title || 'System Vector Field',
   801→        dimension: data.A.length <= 2 ? 2 : 3,
   802→        selectedStates: data.A.length <= 3
   803→          ? Array.from({ length: data.A.length }, (_, i) => i)
   804→          : [0, 1, 2]
   805→      }
   806→
   807→      // Validate data before storing
   808→      if (!vectorFieldData.A || vectorFieldData.A.length === 0) {
   809→        console.error('Invalid system matrix')
   810→        return
   811→      }
   812→
   813→      // Store in sessionStorage
   814→      sessionStorage.setItem('vectorFieldData', JSON.stringify(vectorFieldData))
   815→
   816→      // Navigate to vector field visualizer
   817→      router.push('/vectorfield')
   818→    } catch (error) {
   819→      console.error('Failed to open vector field visualizer:', error)
   820→    }
   821→  }
   822→
   823→  return (
   824→    <div className="w-full">
   825→      <div ref={canvasRef} />