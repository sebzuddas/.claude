     1→# Data Visualization Platform - Next.js Edition
     2→
     3→## Project Overview
     4→A modern data visualization platform built with Next.js 15, React 18, TypeScript, and P5.js. Provides interactive data visualizations including heat maps, scatter plots, particle systems, and more. Configured for static export to GitHub Pages.
     5→
     6→## Tech Stack
     7→
     8→### Frontend Framework
     9→- **Next.js 15** - React framework with App Router
    10→- **React 18** - UI library with hooks and modern patterns
    11→- **TypeScript** - Type-safe development
    12→- **Tailwind CSS** - Utility-first styling
    13→
    14→### Visualization
    15→- **P5.js** - Creative coding library for visualizations
    16→- **Client-side rendering** - All visualizations render in browser
    17→
    18→### Build & Deploy
    19→- **Static Export** - `output: 'export'` for GitHub Pages
    20→- **GitHub Pages** - Static hosting with CDN
    21→- **No server-side dependencies** - Pure client-side application
    22→
    23→## Core Features
    24→
    25→### 1. Interactive Visualizations
    26→- **Heat Maps** - `/heatmap` - 2D data matrices with color-coded intensity
    27→- **Scatter Plots** - `/scatter` - Plot relationships between variables
    28→- **Geospatial Data** - `/geospatial` - Map-based visualizations
    29→- **Time Series** - `/timeseries` - Data changes over time
    30→- **Network Graphs** - `/network` - Connections and relationships
    31→- **Bar Charts** - `/barchart` - Categorical data comparison
    32→
    33→### 2. System Models & Simulations
    34→- **State-Space System** - `/systemmodel` - Discrete-time system simulation with stocks and flows
    35→- **State Space Visualizer** - `/statespace` - Phase portraits and trajectory visualization
    36→- **Particle System** - `/particles` - Physics-based particle simulation
    37→- **Flocking Behavior** - `/flocking` - Emergent group behavior simulation
    38→
    39→### 3. Data Input Methods
    40→1. **URL Parameters** - JSON data encoded in query string
    41→2. **File Upload** - Drag & drop JSON files with validation
    42→3. **PostMessage API** - For iframe embedding and external communication
    43→4. **Demo Data** - Built-in example datasets for each visualization
    44→
    45→### 4. Theming & Customization
    46→- **Color Palettes** - Multiple built-in palettes (Viridis, Plasma, Inferno, etc.)
    47→- **Typography** - Theme-based font sizing from `color-palettes.json`
    48→- **Responsive Design** - Adapts to different screen sizes
    49→
    50→## Architecture
    51→
    52→### Directory Structure
    53→```
    54→/simulator
    55→├── src/
    56→│   ├── app/                    # Next.js App Router pages
    57→│   │   ├── page.tsx           # Home page / visualization gallery
    58→│   │   ├── layout.tsx         # Root layout with metadata
    59→│   │   ├── heatmap/
    60→│   │   │   └── page.tsx       # Heat map visualization page
    61→│   │   ├── systemmodel/
    62→│   │   │   └── page.tsx       # System model simulator page
    63→│   │   ├── statespace/
    64→│   │   │   └── page.tsx       # State space/phase portrait page
    65→│   │   └── globals.css        # Global styles + Tailwind
    66→│   ├── components/
    67→│   │   ├── visualizations/
    68→│   │   │   ├── HeatMap.tsx    # P5.js heat map component
    69→│   │   │   ├── SystemModel.tsx # System simulator with stocks & flows
    70→│   │   │   └── StateSpaceVisualization.tsx # Phase portrait viewer
    71→│   │   └── ui/
    72→│   │       ├── VisualizationLayout.tsx
    73→│   │       ├── ColorPaletteSelector.tsx
    74→│   │       ├── FileUploadZone.tsx
    75→│   │       └── MessageDisplay.tsx
    76→│   ├── lib/
    77→│   │   └── utils.ts           # Utilities (ColorUtils, DataParser, etc.)
    78→│   ├── types/
    79→│   │   └── index.ts           # TypeScript type definitions
    80→│   └── public/
    81→│       └── data/
    82→│           └── color-palettes.json  # Theme configuration
    83→├── backup/                     # Legacy vanilla JS version
    84→├── next.config.js             # Next.js configuration
    85→├── tailwind.config.ts         # Tailwind CSS configuration
    86→└── package.json
    87→```
    88→
    89→### Component Architecture
    90→
    91→#### HeatMap Component (`/src/components/visualizations/HeatMap.tsx`)
    92→
    93→**Key Implementation Details:**
    94→- Uses P5.js in instance mode within React
    95→- Loads theme configuration asynchronously for font sizes
    96→- Uses `paletteRef` for color palette to avoid re-renders
    97→- Implements `p.noLoop()` for static visualizations
    98→- Properly cleans up P5 instances on unmount
    99→
   100→**Memory Leak Fix (Dec 2025):**

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
