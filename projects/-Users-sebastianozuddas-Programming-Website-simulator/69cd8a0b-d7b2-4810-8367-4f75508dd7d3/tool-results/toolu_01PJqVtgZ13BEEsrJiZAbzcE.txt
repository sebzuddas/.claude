    40→      //   width: canvas.width,
    41→      //   height: canvas.height,
    42→      //   workerScript: '/gif.worker.js' // Will need to be added to public folder
    43→      // })
    44→
    45→      const totalFrames = duration * fps
    46→      const frameDelay = 1000 / fps
    47→      let capturedFrames = 0
    48→
    49→      const captureFrame = () => {
    50→        if (capturedFrames >= totalFrames) {
    51→          // Finish recording
    52→          gif.render()
    53→          return
    54→        }
    55→
    56→        // Add current canvas frame
    57→        gif.addFrame(canvas, { copy: true, delay: frameDelay })
    58→        capturedFrames++
    59→
    60→        // Update progress
    61→        const progress = Math.round((capturedFrames / totalFrames) * 100)
    62→        onProgress?.(progress)
    63→
    64→        // Capture next frame
    65→        setTimeout(captureFrame, frameDelay)
    66→      }
    67→
    68→      gif.on('finished', (blob: Blob) => {
    69→        // Download the GIF
    70→        const url = URL.createObjectURL(blob)
    71→        const a = document.createElement('a')
    72→        a.href = url
    73→        a.download = filename
    74→        a.click()
    75→        URL.revokeObjectURL(url)
    76→
    77→        onComplete?.()
    78→        resolve()
    79→      })

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
