The file /Users/sebastianozuddas/Programming/Website/simulator/CLAUDE.md has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
  1036→
  1037→**Special considerations**:
  1038→
  1039→
  1040→---
  1041→**STATUS**: ⏳ Awaiting user input. Notify Claude when ready to implement.
  1042→
  1043→---
  1044→---
  1045→
  1046→## PLANNING: Agent-Based Modeling (ABM) Simulator
  1047→
  1048→**Vision Statement:**
  1049→Create a general-purpose agent-based modeling platform that can simulate diverse systems (social, transport, ecological, etc.) from JSON configuration files. Support both visualized and non-visualized (fast) execution modes. Use a flexible framework based on: Environment + Agents + Interaction Rules.
  1050→
  1051→---
  1052→
  1053→### 1. Framework Architecture & Design Philosophy
  1054→
  1055→**Question**: How should we structure the ABM framework to maximize generality while remaining practical?
  1056→
  1057→**Considerations**:
  1058→- Object-oriented approach (Agent class, Environment class, Simulation class)?
  1059→- Entity-Component-System (ECS) pattern for maximum flexibility?
  1060→- Behavior composition (agents have pluggable behaviors)?
  1061→- Event-driven vs tick-based simulation loop?
  1062→- How to balance ease of use vs extensibility?
  1063→
  1064→**Your Answer**:
  1065→
  1066→
  1067→---
  1068→
  1069→### 2. Agent Definition & Properties
  1070→
  1071→**Question**: What properties and capabilities should agents have? How are they specified in JSON?
  1072→
  1073→**Considerations**:
  1074→- Core properties: position, state, type, unique ID?
  1075→- Custom properties per agent type (e.g., "hunger" for predator, "speed" for vehicle)?
  1076→- Agent behaviors: movement, sensing, decision-making, communication?
  1077→- Agent lifecycle: birth, death, reproduction?
  1078→- Memory/history: do agents remember past states or interactions?
  1079→- Heterogeneous agents: can different agent types coexist in one simulation?
  1080→
  1081→**Your Answer**:
  1082→
  1083→
  1084→---
  1085→
  1086→### 3. Environment Representation
  1087→
  1088→**Question**: How should the environment be structured? What types of spatial models should we support?
  1089→
  1090→**Considerations**:
  1091→- Continuous 2D/3D space (x, y, z coordinates)?
  1092→- Discrete grid (cellular automata style)?
  1093→- Network/graph topology (nodes and edges)?
  1094→- Toroidal boundaries (wrap-around) vs hard boundaries?
  1095→- Environmental properties: resources, terrain, obstacles, zones?
  1096→- Multi-layer environments (e.g., ground + air layers)?
  1097→- Environment dynamics: does the environment change over time?
  1098→
  1099→**Your Answer**:
  1100→
  1101→
  1102→---
  1103→
  1104→### 4. Interaction Rules & Behaviors
  1105→
  1106→**Question**: How do agents interact with each other and the environment? How are these rules specified?
  1107→
  1108→**Considerations**:
  1109→- Sensing radius: how far can agents "see"?
  1110→- Interaction types: collision, communication, resource transfer, reproduction?
  1111→- Rule specification: hard-coded behaviors vs user-defined rules?
  1112→- Probabilistic vs deterministic interactions?
  1113→- Local vs global interactions (neighborhood vs broadcast)?
  1114→- Force-based interactions (attraction/repulsion like flocking)?
  1115→- Conditional behaviors: if-then rules, state machines, decision trees?
  1116→- Scripting language for custom behaviors (e.g., JavaScript expressions in JSON)?
  1117→
  1118→**Your Answer**:
  1119→
  1120→
  1121→---
  1122→
  1123→### 5. JSON Data Format & Schema
  1124→
  1125→**Question**: What should the JSON structure look like? How do we make it intuitive yet powerful?
  1126→
  1127→**Considerations**:
  1128→- Top-level keys: simulation metadata, environment config, agent definitions, rules?
  1129→- Agent initialization: list of individual agents vs population specifications?
  1130→- Rule definitions: array of rule objects with conditions and actions?
  1131→- Parameter sweeps: support for multiple runs with varying parameters?
  1132→- Validation: JSON schema for type checking?
  1133→- Example ABM types to support initially:
  1134→  - Predator-prey (Lotka-Volterra)
  1135→  - Traffic/transportation
  1136→  - Epidemic spread (SIR model)
  1137→  - Social networks
  1138→  - Flocking/swarming
  1139→  - Cellular automata (Conway's Game of Life)
  1140→
  1141→**Your Answer**:
  1142→
  1143→
  1144→---
  1145→
  1146→### 6. Simulation Engine & Execution
  1147→
  1148→**Question**: How should the simulation loop work? What scheduling and update mechanisms?
  1149→
  1150→**Considerations**:
  1151→- Timestep size: fixed dt vs variable (event-driven)?
  1152→- Update order: synchronous (all agents update at once) vs asynchronous (sequential)?
  1153→- Random vs deterministic ordering of agent updates?
  1154→- Scheduling: should certain agents/events happen at specific times?
  1155→- Termination conditions: fixed duration, equilibrium detection, custom criteria?
  1156→- Pause/resume/reset capabilities?
  1157→- Performance targets: how many agents should we support (100? 1000? 10000+)?
  1158→
  1159→**Your Answer**:
  1160→
  1161→
  1162→---
  1163→
  1164→### 7. Visualization Options
  1165→
  1166→**Question**: What should be visualized and how? What rendering technologies should we use?
  1167→
  1168→**Considerations**:
  1169→- Rendering library: P5.js (consistency with other visualizations), raw Canvas 2D, WebGL (for 10,000+ agents)?
  1170→- Visual representation of agents: circles/dots, sprites/images, custom shapes?
  1171→- Color coding: by agent type, state, property value?
  1172→- Environment visualization: background, resource density heatmaps, obstacles?
  1173→- Trails: show agent movement history?
  1174→- Real-time graphs: population over time, resource levels, statistics?
  1175→- 2D vs 3D visualization (is 3D necessary for any ABM types)?
  1176→- Zoom and pan controls?
  1177→- Agent labels/tooltips on hover?
  1178→
  1179→**Your Answer**:
  1180→
  1181→
  1182→---
  1183→
  1184→### 8. Non-Visualized Performance Mode
  1185→
  1186→**Question**: How should the "fast mode" work? What optimizations are needed?
  1187→
  1188→**Considerations**:
  1189→- Skip all rendering, run simulation logic only?
  1190→- Use Web Workers to avoid blocking UI?
  1191→- Batch processing: run N timesteps then update progress?
  1192→- Output options: final state only vs periodic snapshots vs full timeseries?
  1193→- Speed comparison target: how much faster should it be (10x? 100x?)?
  1194→- Progress reporting: how to show user that simulation is running?
  1195→- Memory management for long simulations?
  1196→
  1197→**Your Answer**:
  1198→
  1199→
  1200→---
  1201→
  1202→### 9. Data Output & Analytics
  1203→
  1204→**Question**: What data should be collected and exported? What analysis tools should be built-in?
  1205→
  1206→**Considerations**:
  1207→- Timeseries data: agent positions, states, population counts?
  1208→- Aggregate statistics: mean, variance, spatial density?
  1209→- Export formats: JSON (full state), CSV (timeseries), images/video (visualization)?
  1210→- Real-time plotting: population dynamics, phase portraits, histograms?
  1211→- Metrics specific to ABM type (e.g., clustering coefficient for social networks)?
  1212→- Integration with existing visualizers (state space, time series, network graphs)?
  1213→
  1214→**Your Answer**:
  1215→
  1216→
  1217→---
  1218→
  1219→### 10. Integration with Existing Platform
  1220→
  1221→**Question**: How does ABM fit into the current visualization platform?
  1222→
  1223→**Considerations**:
  1224→- Page structure: similar to `/vectorfield` and `/systemmodel`?
  1225→- File upload zone for JSON configuration?
  1226→- Demo simulations with pre-loaded examples?
  1227→- Navigation: how to link from other pages (if at all)?
  1228→- Homepage listing: should it be in "System Models" or "Visualizations"?
  1229→- Data flow: can ABM results be exported to other visualizers?
  1230→
  1231→**Your Answer**:
  1232→
  1233→
  1234→---
  1235→
  1236→### 11. Extensibility & Plugin System
  1237→
  1238→**Question**: How can users add custom behaviors without modifying core code?
  1239→
  1240→**Considerations**:
  1241→- Plugin architecture: allow users to define custom agent classes?
  1242→- Behavior composition: mix-and-match predefined behaviors?
  1243→- Custom rules in JSON: support JavaScript expressions (eval) or safe subset?
  1244→- Template library: common behaviors (seek, flee, wander, flock)?
  1245→- Version compatibility: how to handle breaking changes?
  1246→
  1247→**Your Answer**:
  1248→
  1249→
  1250→---
  1251→
  1252→### 12. Demo Examples & Use Cases
  1253→
  1254→**Question**: What example simulations should we include to demonstrate capabilities?
  1255→
  1256→**Considerations**:
  1257→- Starter examples (must include):
  1258→  - Flocking/Boids (already have `/flocking` page - integrate or separate?)
  1259→  - Predator-prey dynamics
  1260→  - Epidemic spread (SIR/SEIR model)
  1261→  - Traffic simulation
  1262→  - Conway's Game of Life
  1263→- Domain coverage: ensure examples span social, ecological, physical systems
  1264→- Complexity gradient: simple → intermediate → advanced examples
  1265→- Educational value: can examples teach ABM concepts?
  1266→
  1267→**Your Answer**:
  1268→
  1269→
  1270→---
  1271→
  1272→### 13. Performance & Scalability
  1273→
  1274→**Question**: What performance optimizations are critical? What are acceptable limits?
  1275→
  1276→**Considerations**:
  1277→- Spatial indexing: quadtree/grid for efficient neighbor searches?
  1278→- Level of detail: render fewer agents when zoomed out?
  1279→- Agent pooling: reuse objects instead of creating/destroying?
  1280→- Culling: only update/render agents in viewport?
  1281→- WebGL instancing for rendering thousands of similar agents?
  1282→- Progressive enhancement: graceful degradation for low-end devices?
  1283→- Benchmarking: what metrics to track (FPS, agents/sec, memory)?
  1284→
  1285→**Your Answer**:
  1286→
  1287→
  1288→---
  1289→
  1290→### 14. User Interface & Controls
  1291→
  1292→**Question**: What controls should users have during simulation? What parameters should be adjustable in real-time?
  1293→
  1294→**Considerations**:
  1295→- Playback: play, pause, step forward, reset?
  1296→- Speed control: 0.1x to 10x simulation speed?
  1297→- Live parameter adjustment: change agent behaviors while running?
  1298→- Add/remove agents manually (click to add, click to remove)?
  1299→- Visualization toggles: show/hide trails, labels, grid, zones?
  1300→- Camera controls: pan, zoom, rotate (if 3D)?
  1301→- Inspector: click agent to see detailed state?
  1302→
  1303→**Your Answer**:
  1304→
  1305→
  1306→---
  1307→
  1308→### 15. Technology Stack Decision
  1309→
  1310→**Question**: What rendering and computation technologies should we use?
  1311→
  1312→**Considerations**:
  1313→- Visualization: P5.js vs raw Canvas 2D vs WebGL?
  1314→  - P5.js: consistent with existing visualizations, easier to use
  1315→  - Canvas 2D: lighter weight, more control
  1316→  - WebGL: maximum performance for 10,000+ agents
  1317→- Web Workers: for non-visualized mode?
  1318→- WebAssembly: for compute-intensive simulations (physics, pathfinding)?
  1319→- State management: React state vs separate simulation controller?
  1320→- Type safety: TypeScript interfaces for all ABM components?
  1321→
  1322→**Your Answer**:
  1323→
  1324→
  1325→---
  1326→
  1327→### Summary of Requirements
  1328→
  1329→Once you've filled in the sections above, provide a brief summary here:
  1330→
  1331→**Must-have features for v1**:
  1332→1.
  1333→2.
  1334→3.
  1335→
  1336→**Nice-to-have features for later**:
  1337→-
  1338→-
  1339→
  1340→**Special considerations**:
  1341→-
  1342→
  1343→---
  1344→**STATUS**: ⏳ Awaiting user input. Notify Claude when ready to implement.
  1345→