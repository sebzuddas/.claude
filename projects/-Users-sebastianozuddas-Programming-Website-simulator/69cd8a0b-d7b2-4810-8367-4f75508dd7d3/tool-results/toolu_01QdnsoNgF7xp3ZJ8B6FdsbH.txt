623-  }
624-
625-  const maxTimeSteps = trajectories.length > 0
626-    ? Math.max(...trajectories.map(t => t.t.length))
627-    : 0
628-
629-  return (
630-    <div className="w-full">
631-      <div ref={canvasRef} />
632-
633:      {/* Controls */}
634-      <div className="mt-4 p-4 bg-gray-100 rounded-lg">
635-        {/* Display options */}
636-        <div className="flex items-center justify-center gap-4 mb-4 pb-3 border-b border-gray-300">
637-          <button
638-            onClick={() => setShowArrows(!showArrows)}
639-            className={`px-4 py-2 rounded transition-colors ${
640-              showArrows ? 'bg-blue-500 text-white' : 'bg-gray-300'
641-            }`}
642-          >
643-            {showArrows ? 'âœ“ Arrows' : 'Arrows'}