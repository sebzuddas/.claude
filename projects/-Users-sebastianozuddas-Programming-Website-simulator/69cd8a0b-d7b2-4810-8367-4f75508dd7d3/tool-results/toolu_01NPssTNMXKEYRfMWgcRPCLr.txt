The file /Users/sebastianozuddas/Programming/Website/simulator/src/components/visualizations/VectorField.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   621→    setCurrentTimeIndex(0)
   622→    setIsPlaying(false)
   623→  }
   624→
   625→  const handleAdd3DTrajectory = () => {
   626→    if (trajectories.length >= 2) {
   627→      alert('Maximum 2 trajectories allowed')
   628→      return
   629→    }
   630→
   631→    if (!bounds) return
   632→
   633→    // Parse input values
   634→    const x = parseFloat(ic3DX)
   635→    const y = parseFloat(ic3DY)
   636→    const z = parseFloat(ic3DZ)
   637→
   638→    // Validate
   639→    if (isNaN(x) || isNaN(y) || isNaN(z)) {
   640→      alert('Please enter valid numbers for all coordinates')
   641→      return
   642→    }
   643→
   644→    // Check bounds
   645→    const selectedStates = data.selectedStates || [0, 1, 2]
   646→    const xMin = bounds.min[selectedStates[0]]
   647→    const xMax = bounds.max[selectedStates[0]]
   648→    const yMin = bounds.min[selectedStates[1]]
   649→    const yMax = bounds.max[selectedStates[1]]
   650→    const zMin = bounds.min[selectedStates[2]]
   651→    const zMax = bounds.max[selectedStates[2]]
   652→
   653→    if (x < xMin || x > xMax || y < yMin || y > yMax || z < zMin || z > zMax) {
   654→      alert(`Coordinates out of bounds! Please use values within:\nx: [${xMin.toFixed(1)}, ${xMax.toFixed(1)}]\ny: [${yMin.toFixed(1)}, ${yMax.toFixed(1)}]\nz: [${zMin.toFixed(1)}, ${zMax.toFixed(1)}]`)
   655→      return
   656→    }
   657→
   658→    // Build full state vector
   659→    const n = data.A?.length || 3
   660→    const fullState = new Array(n).fill(0)
   661→    fullState[selectedStates[0]] = x
   662→    fullState[selectedStates[1]] = y
   663→    fullState[selectedStates[2]] = z
   664→
   665→    // Integrate trajectory using RK4
   666→    const dt = 0.05
   667→    const tMax = 20
   668→    const steps = Math.floor(tMax / dt)
   669→
   670→    const t: number[] = []
   671→    const points: number[][] = []
   672→    let state = [...fullState]
   673→
   674→    // System dynamics function
   675→    const evaluateSystem = (s: number[]): number[] => {
   676→      if (data.f) {
   677→        return data.f(s)
   678→      }
   679→      if (data.A) {
   680→        const n = data.A.length
   681→        const dState = new Array(n).fill(0)
   682→        for (let i = 0; i < n; i++) {
   683→          for (let j = 0; j < n; j++) {
   684→            dState[i] += data.A[i][j] * s[j]
   685→          }
   686→        }
   687→        return dState
   688→      }
   689→      return new Array(s.length).fill(0)
   690→    }
   691→
   692→    for (let i = 0; i < steps; i++) {
   693→      t.push(i * dt)
   694→      points.push([...state])
   695→
   696→      // RK4 integration
   697→      const k1 = evaluateSystem(state)
   698→      const k2 = evaluateSystem(state.map((si, j) => si + 0.5 * dt * k1[j]))
   699→      const k3 = evaluateSystem(state.map((si, j) => si + 0.5 * dt * k2[j]))
   700→      const k4 = evaluateSystem(state.map((si, j) => si + dt * k3[j]))
   701→
   702→      state = state.map((si, j) => si + (dt / 6) * (k1[j] + 2 * k2[j] + 2 * k3[j] + k4[j]))
   703→    }
   704→
   705→    const colors = ['rgb(100,150,255)', 'rgb(255,100,150)']
   706→    const color = colors[trajectories.length % colors.length]
   707→
   708→    const trajectory: VectorFieldTrajectory = {
   709→      id: Date.now().toString(),
   710→      x0: fullState,
   711→      points,
   712→      t,
   713→      color
   714→    }
   715→
   716→    setTrajectories(prev => [...prev, trajectory])
   717→    setCurrentTimeIndex(0)
   718→  }
   719→
   720→  const handleScrub = (e: React.ChangeEvent<HTMLInputElement>) => {
   721→    const value = parseInt(e.target.value)
   722→    setCurrentTimeIndex(value)